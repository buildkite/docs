<!--

 _____           ______                _______    _ _
(____ \         |  ___ \       _      (_______)  | (_)_
 _   \ \ ___    | |   | | ___ | |_     _____   _ | |_| |_
| |   | / _ \   | |   | |/ _ \|  _)   |  ___) / || | |  _)
| |__/ / |_| |  | |   | | |_| | |__   | |____( (_| | | |__
|_____/ \___/   |_|   |_|\___/ \___)  |_______)____|_|\___)

This file is auto-generated by scripts/update-cli-help.sh.

To update this file:

1. Make changes to the CLI in https://github.com/buildkite/cli
2. Run ./scripts/update-cli-help.sh from the docs repo root

-->

# Buildkite CLI agent command

The `bk agent` command allows you to manage Buildkite agents from the command line.

## Commands

| Command | Description |
| --- | --- |
| `bk agent pause` | Pause a Buildkite agent. |
| `bk agent list` | List agents. |
| `bk agent resume` | Resume a Buildkite agent. |
| `bk agent stop` | Stop Buildkite agents. |
| `bk agent view` | View details of an agent. |

## Pause an agent

Pause a Buildkite agent.

```bash
bk agent pause <agent-id> [flags]
```

### Arguments

| Argument | Description |
| --- | --- |
| `<agent-id>` | Agent ID to pause |

### Flags

| Flag | Description |
| --- | --- |
| `--note=STRING` | A descriptive note to record why the agent is paused |
| `--timeout-in-minutes=5` | Timeout after which the agent is automatically resumed, in minutes |

### Examples

Pause an agent for 5 minutes (default):

```bash
bk agent pause 0198d108-a532-4a62-9bd7-b2e744bf5c45
```

Pause an agent with a note:

```bash
bk agent pause 0198d108-a532-4a62-9bd7-b2e744bf5c45 --note "Maintenance scheduled"
```

Pause an agent with a note and 60 minute timeout:

```bash
bk agent pause 0198d108-a532-4a62-9bd7-b2e744bf5c45 --note "too many llamas" --timeout-in-minutes 60
```

Pause for a short time (15 minutes) during deployment:

```bash
bk agent pause 0198d108-a532-4a62-9bd7-b2e744bf5c45 --note "Deploy in progress" --timeout-in-minutes 15
```

## List agents

List agents.

```bash
bk agent list [flags]
```

### Flags

| Flag | Description |
| --- | --- |
| `-o`, `--output="json"` | Output format. One of: json, yaml, text |
| `--hostname=STRING` | Filter agents by their hostname |
| `--limit=100` | Maximum number of agents to return |
| `--name=STRING` | Filter agents by their name |
| `--per-page=30` | Number of agents per page |
| `--state=STRING` | Filter agents by state (running, idle, paused) |
| `--tags=TAGS,...` | Filter agents by tags |
| `--version=STRING` | Filter agents by their version |

### Examples

List all agents:

```bash
bk agent list
```

List agents with JSON output:

```bash
bk agent list --output json
```

List only running agents (currently executing jobs):

```bash
bk agent list --state running
```

List only idle agents (connected but not running jobs):

```bash
bk agent list --state idle
```

List only paused agents:

```bash
bk agent list --state paused
```

Filter agents by hostname:

```bash
bk agent list --hostname my-server-01
```

Combine state and hostname filters:

```bash
bk agent list --state idle --hostname my-server-01
```

Filter agents by tags:

```bash
bk agent list --tags queue=default
```

Filter agents by multiple tags (all must match):

```bash
bk agent list --tags queue=default --tags os=linux
```

Multiple filters with output format:

```bash
bk agent list --state running --version 3.107.2 --output json
```

## Resume an agent

Resume a Buildkite agent.

```bash
bk agent resume <agent-id>
```

### Arguments

| Argument | Description |
| --- | --- |
| `<agent-id>` | Agent ID to resume |

### Examples

Resume an agent:

```bash
bk agent resume 0198d108-a532-4a62-9bd7-b2e744bf5c45
```

## Stop agents

Stop Buildkite agents.

```bash
bk agent stop [<agents> ...] [flags]
```

### Flags

| Flag | Description |
| --- | --- |
| `-l`, `--limit=5` | Limit parallel API requests |
| `--force` | Force stop the agent. Terminating any jobs in progress |

### Examples

Stop a single agent:

```bash
bk agent stop 0198d108-a532-4a62-9bd7-b2e744bf5c45
```

Stop multiple agents:

```bash
bk agent stop agent-1 agent-2 agent-3
```

Force stop an agent:

```bash
bk agent stop 0198d108-a532-4a62-9bd7-b2e744bf5c45 --force
```

Stop agents from STDIN:

```bash
cat agent-ids.txt | bk agent stop
```

## View an agent

View details of an agent.

```bash
bk agent view <agent> [flags]
```

### Arguments

| Argument | Description |
| --- | --- |
| `<agent>` | Agent ID to view |

### Flags

| Flag | Description |
| --- | --- |
| `-o`, `--output="json"` | Output format. One of: json, yaml, text |
| `-w`, `--web` | Open agent in a browser |

### Examples

View an agent:

```bash
bk agent view 0198d108-a532-4a62-9bd7-b2e744bf5c45
```

View an agent with organization slug:

```bash
bk agent view my-org/0198d108-a532-4a62-9bd7-b2e744bf5c45
```

Open agent in browser:

```bash
bk agent view 0198d108-a532-4a62-9bd7-b2e744bf5c45 --web
```

View agent as JSON:

```bash
bk agent view 0198d108-a532-4a62-9bd7-b2e744bf5c45 --output json
```

