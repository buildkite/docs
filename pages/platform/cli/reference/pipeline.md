<!--

 _____           ______                _______    _ _
(____ \         |  ___ \       _      (_______)  | (_)_
 _   \ \ ___    | |   | | ___ | |_     _____   _ | |_| |_
| |   | / _ \   | |   | |/ _ \|  _)   |  ___) / || | |  _)
| |__/ / |_| |  | |   | | |_| | |__   | |____( (_| | | |__
|_____/ \___/   |_|   |_|\___/ \___)  |_______)____|_|\___)

This file is auto-generated by scripts/update-bkcli-help.sh.

To update this file:

1. Make changes to the CLI in https://github.com/buildkite/cli
2. Run ./scripts/update-bkcli-help.sh from the docs repo root

-->

# Buildkite CLI pipeline command

The `bk pipeline` command allows you to manage pipelines from the command line.

## Commands

| Command | Description |
| --- | --- |
| `bk pipeline copy` | Copy an existing pipeline. |
| `bk pipeline create` | Create a new pipeline. |
| `bk pipeline list` | List pipelines. |
| `bk pipeline convert` | Convert a CI/CD pipeline configuration to Buildkite format. |
| `bk pipeline validate` | Validate a pipeline YAML file. |
| `bk pipeline view` | View a pipeline. |

## Copy pipeline

Copy an existing pipeline.

```bash
bk pipeline copy [<pipeline>] [flags]
```

### Arguments

| Argument | Description |
| --- | --- |
| `[<pipeline>]` | Source pipeline to copy (slug or org/slug). Uses current pipeline if not specified. |

### Flags

| Flag | Description |
| --- | --- |
| `-c`, `--cluster=STRING` | Cluster name or ID for the new pipeline (required for cross-org copies if target org uses clusters) |
| `-t`, `--target=STRING` | Name for the new pipeline, or org/name to copy to a different organization |
| `--debug` | Enable debug output for REST API calls |
| `--dry-run` | Show what would be copied without creating the pipeline |
| `--output=""` | Output format: json, yaml, text |

### Examples

Copy the current pipeline to a new pipeline:

```bash
bk pipeline cp --target "my-pipeline-v2"
```

Copy a specific pipeline:

```bash
bk pipeline cp my-existing-pipeline --target "my-new-pipeline"
```

Copy a pipeline from another org (if you have access):

```bash
bk pipeline cp other-org/their-pipeline --target "my-copy"
```

Copy to a different organization:

```bash
bk pipeline cp my-pipeline --target "other-org/my-pipeline" --cluster "8302f0b-9b99-4663-23f3-2d64f88s693e"
```

Interactive mode - prompts for source and target:

```bash
bk pipeline cp
```

Preview what would be copied without creating:

```bash
bk pipeline cp my-pipeline --target "copy" --dry-run
```

Output the new pipeline details as JSON:

```bash
bk pipeline cp my-pipeline -t "new-pipeline" -o json
```

## Create a pipeline

Create a new pipeline.

```bash
bk pipeline create <name> [flags]
```

### Arguments

| Argument | Description |
| --- | --- |
| `<name>` | Name of the pipeline |

### Flags

| Flag | Description |
| --- | --- |
| `-c`, `--cluster-id=STRING` | Cluster name or ID to assign the pipeline to |
| `-d`, `--description=STRING` | Description of the pipeline |
| `-r`, `--repository=STRING` | Repository URL |
| `--debug` | Enable debug output for REST API calls |
| `--dry-run` | Simulate pipeline creation without actually creating it |
| `--output=""` | Output format: json, yaml, text |

### Examples

Create a new pipeline:

```bash
bk pipeline create "My Pipeline" --description "My pipeline description" --repository "git@github.com:org/repo.git"
```

Create a new pipeline and view the created pipeline in JSON format:

```bash
bk pipeline create "My Pipeline" --description "My pipeline description" --repository "git@github.com:org/repo.git" --output json
```

Create a pipeline with a cluster (by name):

```bash
bk pipeline create "My Pipeline" -d "Description" -r "git@github.com:org/repo.git" -c "my-cluster"
```

Create a pipeline with a cluster (by ID):

```bash
bk pipeline create "My Pipeline" -d "Description" -r "git@github.com:org/repo.git" -c "cluster-id-123"
```

Simulate creating a pipeline and view the output in yaml format:

```bash
bk pipeline create "My Pipeline" -d "Description" -r "git@github.com:org/repo.git" --dry-run --output yaml
```

## List pipelines

List pipelines.

```bash
bk pipeline list [flags]
```

### Flags

| Flag | Description |
| --- | --- |
| `-l`, `--limit=100` | Maximum number of pipelines to return (max: 3000) |
| `--output=""` | Output format. One of: json, yaml, text |
| `-n`, `--name=STRING` | Filter pipelines by name (supports partial matches, case insensitive) |
| `-r`, `--repository=STRING` | Filter pipelines by repository URL (supports partial matches, case insensitive) |
| `--debug` | Enable debug output for REST API calls |

### Examples

List all pipelines (default limit: 100):

```bash
bk pipeline list
```

List pipelines matching a name pattern:

```bash
bk pipeline list --name pipeline
```

List pipelines by repository:

```bash
bk pipeline list --repo my-repo
```

Get more pipelines (automatically paginates):

```bash
bk pipeline list --limit 500
```

Output as JSON:

```bash
bk pipeline list --name pipeline -o json
```

Use with other commands (e.g., get longest builds from matching pipelines):

```bash
bk pipeline list --name pipeline | xargs -I {} bk build list --pipeline {} --since 48h --duration 1h
```

## Convert pipeline

Convert a CI/CD pipeline configuration to Buildkite format.

```bash
bk pipeline convert --file=STRING [flags]
```

### Flags

| Flag | Description |
| --- | --- |
| `-F`, `--file=STRING` | Path to the pipeline file to convert (required) |
| `-o`, `--output=STRING` | Custom path to save the converted pipeline (default: .buildkite/pipeline.<vendor>.yml) |
| `-v`, `--vendor=STRING` | CI/CD vendor (auto-detected if not specified) |
| `--ai` | Use AI-powered conversion (recommended for Jenkins) |
| `--debug` | Enable debug output for REST API calls |
| `--timeout=300` | Timeout in seconds (use 600+ for AI conversions) |

### Examples

Convert a GitHub Actions workflow:

```bash
bk pipeline convert -F .github/workflows/ci.yml
```

Convert with explicit vendor specification:

```bash
bk pipeline convert -F pipeline.yml --vendor circleci
```

Convert Jenkins pipeline with AI support:

```bash
bk pipeline convert -F Jenkinsfile --ai
```

Save output to a file:

```bash
bk pipeline convert -F .github/workflows/ci.yml -o .buildkite/pipeline.yml
```

## Validate a pipeline

Validate a pipeline YAML file.

```bash
bk pipeline validate [flags]
```

### Flags

| Flag | Description |
| --- | --- |
| `-f`, `--file=FILE,...` | Path to the pipeline YAML file(s) to validate |
| `--debug` | Enable debug output for REST API calls |

### Examples

Validate the default pipeline file:

```bash
bk pipeline validate
```

Validate a specific pipeline file:

```bash
bk pipeline validate --file path/to/pipeline.yaml
```

Validate multiple pipeline files:

```bash
bk pipeline validate --file path/to/pipeline1.yaml --file path/to/pipeline2.yaml
```

## View a pipeline

View a pipeline.

```bash
bk pipeline view [<pipeline>] [flags]
```

### Arguments

| Argument | Description |
| --- | --- |
| `[<pipeline>]` | The pipeline to view. This can be a {pipeline slug} or in the format {org slug}/{pipeline slug}. |

### Flags

| Flag | Description |
| --- | --- |
| `-w`, `--web` | Open the pipeline in a web browser |
| `--output=""` | Output format. One of: json, yaml, text |
| `--debug` | Enable debug output for REST API calls |

### Examples

View a pipeline:

```bash
bk pipeline view my-pipeline
```

View a pipeline in a specific organization:

```bash
bk pipeline view my-org/my-pipeline
```

Open pipeline in browser:

```bash
bk pipeline view my-pipeline --web
```

Output as JSON:

```bash
bk pipeline view my-pipeline -o json
```
