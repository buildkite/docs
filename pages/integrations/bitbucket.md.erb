# Bitbucket

Buildkite integrates with [Bitbucket](https://bitbucket.org/) to provide automated builds based on your source control. You can run a build every time you push code to Bitbucket, and pull requests can have their build status live-updated as builds progress.

This guide shows you how to set up your Bitbucket builds with Buildkite.

{:toc}

## Set up the Bitbucket webhook

Once you’ve created a pipeline in Buildkite and copied in your bitbucket.org’s repository URL, Buildkite shows you setup instructions for configuring your Bitbucket webhooks.

You can also find these instructions by following the _Bitbucket Setup Instructions_ link on your Buildkite pipeline’s _Settings_ page:

<%= image "setup-instructions.png", width: 592/2, height: 356/2, alt: "Screenshot of Bitbucket setup instructions link" %>

The setup instructions give you:
- A direct link to your Bitbucket repository’s _Webhooks_ settings
- Instructions
- A custom webhook URL for the pipeline

<%= image "setup.png", width: 1738/2, height: 764/2, alt: "Screenshot of Bitbucket setup instructions on Buildkite" %>

Once you’ve followed the link you can add a new webhook:

<%= image "bitbucket-webhook-add.png", width: 1396/2, height: 528/2, alt: "Screenshot of a Bitbucket webhook settings" %>

After filling out the webhook details using the instructions from your Buildkite pipeline settings, select _Save_, and you’re ready to push a build.

## Enable commit status updates

If you want your Bitbucket pull request’s build status icons to update as builds progress, you need to connect your Bitbucket account with Buildkite. You only need to do this once, and if you don't need build status updates you can skip this step altogether.

To connect your Bitbucket account:

1. Open Buildkite’s _Personal Settings_.
2. Choose _Connected Apps_.
3. Select _Connect_ next to _Bitbucket_.

<%= image "personal-settings.png", width: 1938/2, height: 382/2, alt: "Screenshot of the Buildkite Connected Apps screen" %>

Buildkite prompts you to give permission for Buildkite to post status updates, then redirects back to your _Connected Apps_ page.

## Branch configuration and settings

You can edit the Bitbucket settings for each pipeline from the pipeline’s settings page. Go to _Pipelines_ > _Pipeline Menu_ > _Pipeline Settings_ > _Bitbucket_.

If you need more control over your pipeline configuration, add a [pipeline.yml](/docs/pipelines/defining-steps#adding-steps) to your repository. Then you can use [conditionals](/docs/pipelines/conditionals) and [branch filtering](/docs/pipelines/branch-configuration) to configure your pipeline.



## Mercurial support

Buildkite Agent’s default source control tool is Git, and doesn’t support [Mercurial](https://www.mercurial-scm.org) out of the box. If you want to use Buildkite with a Bitbucket Mercurial repository, you need to add your own Mercurial checkout code using a custom [Buildkite Agent global checkout hook](/docs/agent/v3/hooks).


<%= render_markdown 'integrations/branch_config_settings' %>

<%= render_markdown 'integrations/one_repo_multi_org' %>
