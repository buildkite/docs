<!--

 _____           ______                _______    _ _
(____ \         |  ___ \       _      (_______)  | (_)_
 _   \ \ ___    | |   | | ___ | |_     _____   _ | |_| |_
| |   | / _ \   | |   | |/ _ \|  _)   |  ___) / || | |  _)
| |__/ / |_| |  | |   | | |_| | |__   | |____( (_| | | |__
|_____/ \___/   |_|   |_|\___/ \___)  |_______)____|_|\___)

This file is auto-generated by scripts/update-agent-help.sh.

Instead of directly changing this file, you must:

1. Update the agent CLI help content in https://github.com/buildkite/agent (not in this repo)
2. Update AGENT_VERSION at the top of scripts/update-agent-help.sh (in your docs repo)
   to the new agent version tag or commit hash
3. From the root of your docs repo, run ./scripts/update-agent-help.sh

-->

### Usage

`buildkite-agent bootstrap [options...]`

### Description

The bootstrap command executes a Buildkite job locally.

Generally the bootstrap command is run as a sub-process of the buildkite-agent to execute
a given job sent from buildkite.com, but you can also invoke the bootstrap manually.

Execution is broken down into phases. By default, the bootstrap runs a plugin phase which
sets up any plugins specified, then a checkout phase which pulls down your code and then a
command phase that executes the specified command in the created environment.

You can run only specific phases with the --phases flag.

The bootstrap is also responsible for executing hooks around the phases.
See https://buildkite.com/docs/agent/v3/hooks for more details.

### Example

```shell
$ eval $(curl -s -H "Authorization: Bearer xxx" \
   "https://api.buildkite.com/v2/organizations/[org]/pipelines/[proj]/builds/[build]/jobs/[job]/env.txt" | \
   sed 's/^/export /' \
 )
$ buildkite-agent bootstrap --build-path builds
```

### Options

<!-- vale off -->

<table class="Docs__attribute__table">
<tr id="command"><th><code>--command value</code> <a class="Docs__attribute__link" href="#command">#</a></th><td><p>The command to run<br /><strong>Environment variable</strong>: <code>$BUILDKITE_COMMAND</code></p></td></tr>
<tr id="job"><th><code>--job value</code> <a class="Docs__attribute__link" href="#job">#</a></th><td><p>The ID of the job being run<br /><strong>Environment variable</strong>: <code>$BUILDKITE_JOB_ID</code></p></td></tr>
<tr id="repository"><th><code>--repository value</code> <a class="Docs__attribute__link" href="#repository">#</a></th><td><p>The repository to clone and run the job from<br /><strong>Environment variable</strong>: <code>$BUILDKITE_REPO</code></p></td></tr>
<tr id="commit"><th><code>--commit value</code> <a class="Docs__attribute__link" href="#commit">#</a></th><td><p>The commit to checkout in the repository<br /><strong>Environment variable</strong>: <code>$BUILDKITE_COMMIT</code></p></td></tr>
<tr id="branch"><th><code>--branch value</code> <a class="Docs__attribute__link" href="#branch">#</a></th><td><p>The branch the commit is in<br /><strong>Environment variable</strong>: <code>$BUILDKITE_BRANCH</code></p></td></tr>
<tr id="tag"><th><code>--tag value</code> <a class="Docs__attribute__link" href="#tag">#</a></th><td><p>The tag the commit<br /><strong>Environment variable</strong>: <code>$BUILDKITE_TAG</code></p></td></tr>
<tr id="refspec"><th><code>--refspec value</code> <a class="Docs__attribute__link" href="#refspec">#</a></th><td><p>Optional refspec to override git fetch<br /><strong>Environment variable</strong>: <code>$BUILDKITE_REFSPEC</code></p></td></tr>
<tr id="plugins"><th><code>--plugins value</code> <a class="Docs__attribute__link" href="#plugins">#</a></th><td><p>The plugins for the job<br /><strong>Environment variable</strong>: <code>$BUILDKITE_PLUGINS</code></p></td></tr>
<tr id="secrets"><th><code>--secrets value</code> <a class="Docs__attribute__link" href="#secrets">#</a></th><td><p>Secrets to be loaded into the job environment<br /><strong>Environment variable</strong>: <code>$BUILDKITE_SECRETS_CONFIG</code></p></td></tr>
<tr id="pullrequest"><th><code>--pullrequest value</code> <a class="Docs__attribute__link" href="#pullrequest">#</a></th><td><p>The number/id of the pull request this commit belonged to<br /><strong>Environment variable</strong>: <code>$BUILDKITE_PULL_REQUEST</code></p></td></tr>
<tr id="pull-request-using-merge-refspec"><th><code>--pull-request-using-merge-refspec </code> <a class="Docs__attribute__link" href="#pull-request-using-merge-refspec">#</a></th><td><p>Whether the agent should attempt to checkout the pull request commit using the merge refspec. This feature is in private preview and requires backend enablementâ€”contact support to enable (default: false)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_PULL_REQUEST_USING_MERGE_REFSPEC</code></p></td></tr>
<tr id="agent"><th><code>--agent value</code> <a class="Docs__attribute__link" href="#agent">#</a></th><td><p>The name of the agent running the job<br /><strong>Environment variable</strong>: <code>$BUILDKITE_AGENT_NAME</code></p></td></tr>
<tr id="queue"><th><code>--queue value</code> <a class="Docs__attribute__link" href="#queue">#</a></th><td><p>The name of the queue the agent belongs to, if tagged<br /><strong>Environment variable</strong>: <code>$BUILDKITE_AGENT_META_DATA_QUEUE</code></p></td></tr>
<tr id="organization"><th><code>--organization value</code> <a class="Docs__attribute__link" href="#organization">#</a></th><td><p>The slug of the organization that the job is a part of<br /><strong>Environment variable</strong>: <code>$BUILDKITE_ORGANIZATION_SLUG</code></p></td></tr>
<tr id="pipeline"><th><code>--pipeline value</code> <a class="Docs__attribute__link" href="#pipeline">#</a></th><td><p>The slug of the pipeline that the job is a part of<br /><strong>Environment variable</strong>: <code>$BUILDKITE_PIPELINE_SLUG</code></p></td></tr>
<tr id="pipeline-provider"><th><code>--pipeline-provider value</code> <a class="Docs__attribute__link" href="#pipeline-provider">#</a></th><td><p>The id of the SCM provider that the repository is hosted on<br /><strong>Environment variable</strong>: <code>$BUILDKITE_PIPELINE_PROVIDER</code></p></td></tr>
<tr id="artifact-upload-paths"><th><code>--artifact-upload-paths value</code> <a class="Docs__attribute__link" href="#artifact-upload-paths">#</a></th><td><p>Paths to files to automatically upload at the end of a job<br /><strong>Environment variable</strong>: <code>$BUILDKITE_ARTIFACT_PATHS</code></p></td></tr>
<tr id="artifact-upload-destination"><th><code>--artifact-upload-destination value</code> <a class="Docs__attribute__link" href="#artifact-upload-destination">#</a></th><td><p>A custom location to upload artifact paths to (for example, s3://my-custom-bucket/and/prefix)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_ARTIFACT_UPLOAD_DESTINATION</code></p></td></tr>
<tr id="clean-checkout"><th><code>--clean-checkout </code> <a class="Docs__attribute__link" href="#clean-checkout">#</a></th><td><p>Whether or not the bootstrap should remove the existing repository before running the command (default: false)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_CLEAN_CHECKOUT</code></p></td></tr>
<tr id="skip-checkout"><th><code>--skip-checkout </code> <a class="Docs__attribute__link" href="#skip-checkout">#</a></th><td><p>Skip the git checkout phase entirely<br /><strong>Environment variable</strong>: <code>$BUILDKITE_SKIP_CHECKOUT</code></p></td></tr>
<tr id="git-checkout-flags"><th><code>--git-checkout-flags value</code> <a class="Docs__attribute__link" href="#git-checkout-flags">#</a></th><td><p>Flags to pass to "git checkout" command (default: "-f")<br /><strong>Environment variable</strong>: <code>$BUILDKITE_GIT_CHECKOUT_FLAGS</code></p></td></tr>
<tr id="git-clone-flags"><th><code>--git-clone-flags value</code> <a class="Docs__attribute__link" href="#git-clone-flags">#</a></th><td><p>Flags to pass to "git clone" command (default: "-v")<br /><strong>Environment variable</strong>: <code>$BUILDKITE_GIT_CLONE_FLAGS</code></p></td></tr>
<tr id="git-clone-mirror-flags"><th><code>--git-clone-mirror-flags value</code> <a class="Docs__attribute__link" href="#git-clone-mirror-flags">#</a></th><td><p>Flags to pass to "git clone" command when mirroring (default: "-v")<br /><strong>Environment variable</strong>: <code>$BUILDKITE_GIT_CLONE_MIRROR_FLAGS</code></p></td></tr>
<tr id="git-clean-flags"><th><code>--git-clean-flags value</code> <a class="Docs__attribute__link" href="#git-clean-flags">#</a></th><td><p>Flags to pass to "git clean" command (default: "-ffxdq")<br /><strong>Environment variable</strong>: <code>$BUILDKITE_GIT_CLEAN_FLAGS</code></p></td></tr>
<tr id="git-fetch-flags"><th><code>--git-fetch-flags value</code> <a class="Docs__attribute__link" href="#git-fetch-flags">#</a></th><td><p>Flags to pass to "git fetch" command<br /><strong>Environment variable</strong>: <code>$BUILDKITE_GIT_FETCH_FLAGS</code></p></td></tr>
<tr id="git-submodule-clone-config"><th><code>--git-submodule-clone-config value</code> <a class="Docs__attribute__link" href="#git-submodule-clone-config">#</a></th><td><p>Comma separated key=value git config pairs applied before git submodule clone commands. For example, `update --init`. If the config is needed to be applied to all git commands, supply it in a global git config file for the system that the agent runs in instead.<br /><strong>Environment variable</strong>: <code>$BUILDKITE_GIT_SUBMODULE_CLONE_CONFIG</code></p></td></tr>
<tr id="git-mirrors-path"><th><code>--git-mirrors-path value</code> <a class="Docs__attribute__link" href="#git-mirrors-path">#</a></th><td><p>Path to where mirrors of git repositories are stored<br /><strong>Environment variable</strong>: <code>$BUILDKITE_GIT_MIRRORS_PATH</code></p></td></tr>
<tr id="git-mirrors-lock-timeout"><th><code>--git-mirrors-lock-timeout value</code> <a class="Docs__attribute__link" href="#git-mirrors-lock-timeout">#</a></th><td><p>Seconds to lock a git mirror during clone, should exceed your longest checkout (default: 300)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_GIT_MIRRORS_LOCK_TIMEOUT</code></p></td></tr>
<tr id="git-mirrors-skip-update"><th><code>--git-mirrors-skip-update </code> <a class="Docs__attribute__link" href="#git-mirrors-skip-update">#</a></th><td><p>Skip updating the Git mirror (default: false)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_GIT_MIRRORS_SKIP_UPDATE</code></p></td></tr>
<tr id="bin-path"><th><code>--bin-path value</code> <a class="Docs__attribute__link" href="#bin-path">#</a></th><td><p>Directory where the buildkite-agent binary lives<br /><strong>Environment variable</strong>: <code>$BUILDKITE_BIN_PATH</code></p></td></tr>
<tr id="build-path"><th><code>--build-path value</code> <a class="Docs__attribute__link" href="#build-path">#</a></th><td><p>Directory where builds will be created<br /><strong>Environment variable</strong>: <code>$BUILDKITE_BUILD_PATH</code></p></td></tr>
<tr id="hooks-path"><th><code>--hooks-path value</code> <a class="Docs__attribute__link" href="#hooks-path">#</a></th><td><p>Directory where the hook scripts are found<br /><strong>Environment variable</strong>: <code>$BUILDKITE_HOOKS_PATH</code></p></td></tr>
<tr id="additional-hooks-paths"><th><code>--additional-hooks-paths value</code> <a class="Docs__attribute__link" href="#additional-hooks-paths">#</a></th><td><p>Any additional directories to look for agent hooks<br /><strong>Environment variable</strong>: <code>$BUILDKITE_ADDITIONAL_HOOKS_PATHS</code></p></td></tr>
<tr id="sockets-path"><th><code>--sockets-path value</code> <a class="Docs__attribute__link" href="#sockets-path">#</a></th><td><p>Directory where the agent will place sockets (default: "$HOME/.buildkite-agent/sockets")<br /><strong>Environment variable</strong>: <code>$BUILDKITE_SOCKETS_PATH</code></p></td></tr>
<tr id="plugins-path"><th><code>--plugins-path value</code> <a class="Docs__attribute__link" href="#plugins-path">#</a></th><td><p>Directory where the plugins are saved to<br /><strong>Environment variable</strong>: <code>$BUILDKITE_PLUGINS_PATH</code></p></td></tr>
<tr id="command-eval"><th><code>--command-eval </code> <a class="Docs__attribute__link" href="#command-eval">#</a></th><td><p>Allow running of arbitrary commands (default: true)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_COMMAND_EVAL</code></p></td></tr>
<tr id="plugins-enabled"><th><code>--plugins-enabled </code> <a class="Docs__attribute__link" href="#plugins-enabled">#</a></th><td><p>Allow plugins to be run (default: true)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_PLUGINS_ENABLED</code></p></td></tr>
<tr id="plugin-validation"><th><code>--plugin-validation </code> <a class="Docs__attribute__link" href="#plugin-validation">#</a></th><td><p>Validate plugin configuration (default: false)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_PLUGIN_VALIDATION</code></p></td></tr>
<tr id="plugins-always-clone-fresh"><th><code>--plugins-always-clone-fresh </code> <a class="Docs__attribute__link" href="#plugins-always-clone-fresh">#</a></th><td><p>Always make a new clone of plugin source, even if already present (default: false)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_PLUGINS_ALWAYS_CLONE_FRESH</code></p></td></tr>
<tr id="local-hooks-enabled"><th><code>--local-hooks-enabled </code> <a class="Docs__attribute__link" href="#local-hooks-enabled">#</a></th><td><p>Allow local hooks to be run (default: true)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_LOCAL_HOOKS_ENABLED</code></p></td></tr>
<tr id="ssh-keyscan"><th><code>--ssh-keyscan </code> <a class="Docs__attribute__link" href="#ssh-keyscan">#</a></th><td><p>Automatically run ssh-keyscan before checkout (default: true)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_SSH_KEYSCAN</code></p></td></tr>
<tr id="git-submodules"><th><code>--git-submodules </code> <a class="Docs__attribute__link" href="#git-submodules">#</a></th><td><p>Enable git submodules (default: true)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_GIT_SUBMODULES</code></p></td></tr>
<tr id="pty"><th><code>--pty </code> <a class="Docs__attribute__link" href="#pty">#</a></th><td><p>Run jobs within a pseudo terminal (default: true)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_PTY</code></p></td></tr>
<tr id="shell"><th><code>--shell value</code> <a class="Docs__attribute__link" href="#shell">#</a></th><td><p>The shell to use to interpret build commands (default: "/bin/bash -e -c")<br /><strong>Environment variable</strong>: <code>$BUILDKITE_SHELL</code></p></td></tr>
<tr id="phases"><th><code>--phases value</code> <a class="Docs__attribute__link" href="#phases">#</a></th><td><p>The specific phases to execute. The order they're defined is irrelevant.<br /><strong>Environment variable</strong>: <code>$BUILDKITE_BOOTSTRAP_PHASES</code></p></td></tr>
<tr id="tracing-backend"><th><code>--tracing-backend value</code> <a class="Docs__attribute__link" href="#tracing-backend">#</a></th><td><p>The name of the tracing backend to use.<br /><strong>Environment variable</strong>: <code>$BUILDKITE_TRACING_BACKEND</code></p></td></tr>
<tr id="tracing-service-name"><th><code>--tracing-service-name value</code> <a class="Docs__attribute__link" href="#tracing-service-name">#</a></th><td><p>Service name to use when reporting traces. (default: "buildkite-agent")<br /><strong>Environment variable</strong>: <code>$BUILDKITE_TRACING_SERVICE_NAME</code></p></td></tr>
<tr id="tracing-traceparent"><th><code>--tracing-traceparent value</code> <a class="Docs__attribute__link" href="#tracing-traceparent">#</a></th><td><p>W3C Trace Parent for tracing<br /><strong>Environment variable</strong>: <code>$BUILDKITE_TRACING_TRACEPARENT</code></p></td></tr>
<tr id="tracing-propagate-traceparent"><th><code>--tracing-propagate-traceparent </code> <a class="Docs__attribute__link" href="#tracing-propagate-traceparent">#</a></th><td><p>Accept traceparent from Buildkite control plane (default: false)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_TRACING_PROPAGATE_TRACEPARENT</code></p></td></tr>
<tr id="no-job-api"><th><code>--no-job-api </code> <a class="Docs__attribute__link" href="#no-job-api">#</a></th><td><p>Disables the Job API, which gives commands in jobs some abilities to introspect and mutate the state of the job (default: false)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_AGENT_NO_JOB_API</code></p></td></tr>
<tr id="disable-warnings-for"><th><code>--disable-warnings-for value</code> <a class="Docs__attribute__link" href="#disable-warnings-for">#</a></th><td><p>A list of warning IDs to disable<br /><strong>Environment variable</strong>: <code>$BUILDKITE_AGENT_DISABLE_WARNINGS_FOR</code></p></td></tr>
<tr id="cancel-signal"><th><code>--cancel-signal value</code> <a class="Docs__attribute__link" href="#cancel-signal">#</a></th><td><p>The signal to use for cancellation (default: "SIGTERM")<br /><strong>Environment variable</strong>: <code>$BUILDKITE_CANCEL_SIGNAL</code></p></td></tr>
<tr id="cancel-grace-period"><th><code>--cancel-grace-period value</code> <a class="Docs__attribute__link" href="#cancel-grace-period">#</a></th><td><p>The number of seconds a canceled or timed out job is given to gracefully terminate and upload its artifacts (default: 10)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_CANCEL_GRACE_PERIOD</code></p></td></tr>
<tr id="signal-grace-period-seconds"><th><code>--signal-grace-period-seconds value</code> <a class="Docs__attribute__link" href="#signal-grace-period-seconds">#</a></th><td><p>The number of seconds given to a subprocess to handle being sent `cancel-signal`. After this period has elapsed, SIGKILL will be sent. Negative values are taken relative to `cancel-grace-period`. The default value (-1) means that the effective signal grace period is equal to `cancel-grace-period` minus 1. (default: -1)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_SIGNAL_GRACE_PERIOD_SECONDS</code></p></td></tr>
<tr id="debug"><th><code>--debug </code> <a class="Docs__attribute__link" href="#debug">#</a></th><td><p>Enable debug mode. Synonym for `--log-level debug`. Takes precedence over `--log-level` (default: false)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_AGENT_DEBUG</code></p></td></tr>
<tr id="log-level"><th><code>--log-level value</code> <a class="Docs__attribute__link" href="#log-level">#</a></th><td><p>Set the log level for the agent, making logging more or less verbose. Defaults to notice. Allowed values are: debug, info, error, warn, fatal (default: "notice")<br /><strong>Environment variable</strong>: <code>$BUILDKITE_AGENT_LOG_LEVEL</code></p></td></tr>
<tr id="experiment"><th><code>--experiment value</code> <a class="Docs__attribute__link" href="#experiment">#</a></th><td><p>Enable experimental features within the buildkite-agent<br /><strong>Environment variable</strong>: <code>$BUILDKITE_AGENT_EXPERIMENT</code></p></td></tr>
<tr id="profile"><th><code>--profile value</code> <a class="Docs__attribute__link" href="#profile">#</a></th><td><p>Enable a profiling mode, either cpu, memory, mutex or block<br /><strong>Environment variable</strong>: <code>$BUILDKITE_AGENT_PROFILE</code></p></td></tr>
<tr id="redacted-vars"><th><code>--redacted-vars value</code> <a class="Docs__attribute__link" href="#redacted-vars">#</a></th><td><p>Pattern of environment variable names containing sensitive values (default: "*_PASSWORD", "*_SECRET", "*_TOKEN", "*_PRIVATE_KEY", "*_ACCESS_KEY", "*_SECRET_KEY", "*_CONNECTION_STRING")<br /><strong>Environment variable</strong>: <code>$BUILDKITE_REDACTED_VARS</code></p></td></tr>
<tr id="strict-single-hooks"><th><code>--strict-single-hooks </code> <a class="Docs__attribute__link" href="#strict-single-hooks">#</a></th><td><p>Enforces that only one checkout hook, and only one command hook, can be run (default: false)<br /><strong>Environment variable</strong>: <code>$BUILDKITE_STRICT_SINGLE_HOOKS</code></p></td></tr>
<tr id="trace-context-encoding"><th><code>--trace-context-encoding value</code> <a class="Docs__attribute__link" href="#trace-context-encoding">#</a></th><td><p>Sets the inner encoding for BUILDKITE_TRACE_CONTEXT. Must be either json or gob (default: "gob")<br /><strong>Environment variable</strong>: <code>$BUILDKITE_TRACE_CONTEXT_ENCODING</code></p></td></tr>
</table>

<!-- vale on -->
