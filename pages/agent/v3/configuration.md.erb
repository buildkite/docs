# Buildkite Agent Configuration

Every agent installer comes with a configuration file. You can also customize many of the configuration values using environment variables.

You can find the location of your configuration file in your platform’s installation documentation, or you can set it using the `BUILDKITE_AGENT_CONFIG` environment variable or the `--config` command line argument.

<%= toc %>

## Example Configuration File

```sh
token="24db61df8338027652b24aadf82dd483b016eef98fcd332815"
name="my-app-%n"
tags="ci=true,docker=true"
git-clean-flags="-fdqx"
debug=true
```

## Configuration Settings

<table>
  <tbody>
    <tr>
      <th><code>token</code></th>
      <td>
        The agent token from your organization’s Agents page
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_AGENT_TOKEN</code></p>
      </td>
    </tr>

    <tr>
      <th><code>name</code></th>
      <td>
        The name of the agent
        <p class="Docs__api-param-eg"><em>Default:</em> <code>"%hostname-%n"</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_AGENT_NAME</code></p>
      </td>
    </tr>

    <tr>
      <th><code>priority</code></th>
      <td>
        The priority of the agent (higher priorities are assigned work first, null is assigned last)
        <p class="Docs__api-param-eg"><em>Default:</em> <code>null</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_AGENT_PRIORITY</code></p>
      </td>
    </tr>

    <tr>
      <th><code>tags</code></th>
      <td>
        Tags for the agent
        <p class="Docs__api-param-eg"><em>Default:</em> <code>"queue=default"</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_AGENT_TAGS</code></p>
      </td>
    </tr>

    <tr>
      <th><code>tags-from-ec2</code></th>
      <td>
        Include the host's EC2 meta-data (instance-id, instance-type, and ami-id) as tags
        <p class="Docs__api-param-eg"><em>Default:</em> <code>false</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_AGENT_TAGS_FROM_EC2</code></p>
      </td>
    </tr>

    <tr>
      <th><code>tags-from-ec2-tags</code></th>
      <td>
        Include the host's EC2 tags as agent tags
        <p class="Docs__api-param-eg"><em>Default:</em> <code>false</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_AGENT_TAGS_FROM_EC2_TAGS</code></p>
      </td>
    </tr>

    <tr>
      <th><code>wait-for-ec2-tags-timeout</code></th>
      <td>
        The amount of time to wait for tags from EC2 before proceeding
        <p class="Docs__api-param-eg"><em>Default:</em> <code>10s</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_AGENT_WAIT_FOR_EC2_TAGS_TIMEOUT</code></p>
      </td>
    </tr>

    <tr>
      <th><code>tags-from-gcp</code></th>
      <td>
        Include the host's Google Cloud meta-data as tags (instance-id, machine-type, preemptible, project-id, region, and zone)
        <p class="Docs__api-param-eg"><em>Default:</em> <code>false</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_AGENT_TAGS_FROM_GCP</code></p>
      </td>
    </tr>

    <tr>
      <th><code>shell</code></th>
      <td>
        The shell command used to interpret build commands, e.g <code>/bin/bash -e -c</code>
        <p class="Docs__api-param-eg"><em>Default:</em> <code>"C:\Windows\System32\CMD.exe"</code> on Windows, <code>"/bin/bash"</code> on *nix systems</p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_SHELL</code></p>
      </td>
    </tr>

    <tr>
      <th><code>git-clean-flags</code></th>
      <td>
        Flags to pass to the <code>git clean</code> command. Prior to 3.0 this defaulted to <code>"-fdq"</code>
        <p class="Docs__api-param-eg"><em>Default:</em> <code>"-fxdq"</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_GIT_CLEAN_FLAGS</code></p>
      </td>
    </tr>

    <tr>
      <th><code>git-clone-flags</code></th>
      <td>
        Flags to pass to the <code>git clone</code> command
        <p class="Docs__api-param-eg"><em>Default:</em> <code>"-v"</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_GIT_CLONE_FLAGS</code></p>
      </td>
    </tr>

    <tr>
      <th><code>bootstrap-script</code></th>
      <td>
        Command to invoke the bootstrap process
        <p class="Docs__api-param-eg"><em>Default:</em> <code>"buildkite-agent bootstrap"</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_BOOTSTRAP_SCRIPT_PATH</code></p>
      </td>
    </tr>

    <tr>
      <th><code>build-path</code></th>
      <td>
        Path to where the builds will run from
        <p class="Docs__api-param-eg"><em>Default:</em> (depends on platform)</p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_BUILD_PATH</code></p>
      </td>
    </tr>

    <tr>
      <th><code>hooks-path</code></th>
      <td>
        Directory where the global hook scripts are found
        <p class="Docs__api-param-eg"><em>Default:</em> (depends on platform)</p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_HOOKS_PATH</code></p>
      </td>
    </tr>

    <tr>
      <th><code>plugins-path</code></th>
      <td>
        Directory where the plugins are saved
        <p class="Docs__api-param-eg"><em>Default:</em> (depends on platform)</p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_PLUGINS_PATH</code></p>
      </td>
    </tr>

    <tr>
      <th><code>no-pty</code></th>
      <td>
        Do not run jobs within a pseudo terminal
        <p class="Docs__api-param-eg"><em>Default:</em> <code>false</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_NO_PTY</code></p>
      </td>
    </tr>

    <tr>
      <th><code>no-ssh-keyscan</code></th>
      <td>
        Don't automatically run ssh-keyscan before checkout
        <p class="Docs__api-param-eg"><em>Default:</em> <code>false</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_NO_SSH_KEYSCAN</code></p>
      </td>
    </tr>

    <tr>
      <th><code>no-command-eval</code></th>
      <td>
        Do not allow this agent to run arbitrary console commands
        <p class="Docs__api-param-eg"><em>Default:</em> <code>false</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_NO_COMMAND_EVAL</code></p>
      </td>
    </tr>

    <tr>
      <th><code>disconnect-after-job</code></th>
      <td>
        Disconnect after processing a single job
        <p class="Docs__api-param-eg"><em>Default:</em> <code>false</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_AGENT_DISCONNECT_AFTER_JOB</code></p>
      </td>
    </tr>

    <tr>
      <th><code>disconnect-after-job-timeout</code></th>
      <td>
        When `disconnect-after-job` is specified, the number of seconds to wait for a job before shutting down
        <p class="Docs__api-param-eg"><em>Default:</em> <code>120</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_AGENT_DISCONNECT_AFTER_JOB_TIMEOUT</code></p>
      </td>
    </tr>

    <tr>
      <th><code>debug</code></th>
      <td>
        Enable debug mode
        <p class="Docs__api-param-eg"><em>Default:</em> <code>false</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_AGENT_DEBUG</code></p>
      </td>
    </tr>

    <tr>
      <th><code>debug-http</code></th>
      <td>
        Log all HTTP request and response bodies
        <p class="Docs__api-param-eg"><em>Default:</em> <code>false</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_AGENT_DEBUG_HTTP</code></p>
      </td>
    </tr>

    <tr>
      <th><code>no-color</code></th>
      <td>
        Do not show colors in logging
        <p class="Docs__api-param-eg"><em>Default:</em> <code>false</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_AGENT_NO_COLOR</code></p>
      </td>
    </tr>

    <tr>
      <th><code>timestamp-lines</code></th>
      <td>
        Prepend timestamps on each line of output
        <p class="Docs__api-param-eg"><em>Default:</em> <code>false</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_TIMESTAMP_LINES</code></p>
      </td>
    </tr>

    <tr>
      <th><code>no-plugins</code></th>
      <td>
        Do not load any plugins
        <p class="Docs__api-param-eg"><em>Default:</em> <code>false</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_AGENT_NO_PLUGINS</code></p>
      </td>
    </tr>
  </tbody>
</table>

## Deprecated Configuration Settings

<table>
  <tbody>
    <tr>
      <th><code>meta-data</code></th>
      <td>
        Meta data for the agent
        <p class="Docs__api-param-eg"><em>Default:</em> <code>"queue=default"</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_AGENT_META_DATA</code></p>
        <p class="Docs__api-param-eg"><em>Use instead:</em> <code>tags</code></p>
      </td>
    </tr>

    <tr>
      <th><code>meta-data-ec2</code></th>
      <td>
        Include the host's EC2 meta-data (instance-id, instance-type, and ami-id) as meta-data
        <p class="Docs__api-param-eg"><em>Default:</em> <code>false</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_AGENT_META_DATA_EC2</code></p>
        <p class="Docs__api-param-eg"><em>Use instead:</em> <code>tags-from-ec2</code></p>
      </td>
    </tr>

    <tr>
      <th><code>meta-data-ec2-tags</code></th>
      <td>
        Include the host's EC2 tags as meta-data
        <p class="Docs__api-param-eg"><em>Default:</em> <code>false</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_AGENT_META_DATA_EC2_TAGS</code></p>
        <p class="Docs__api-param-eg"><em>Use instead:</em> <code>tags-from-ec2-tags</code></p>
      </td>
    </tr>

    <tr>
      <th><code>no-automatic-ssh-fingerprint-verification</code></th>
      <td>
        Do not automatically verify SSH fingerprints for first-time checkouts
        <p class="Docs__api-param-eg"><em>Default:</em> <code>false</code></p>
        <p class="Docs__api-param-eg"><em>Environment variable:</em> <code>BUILDKITE_NO_AUTOMATIC_SSH_FINGERPRINT_VERIFICATION</code></p>
        <p class="Docs__api-param-eg"><em>Use instead:</em> <code>no-ssh-keyscan</code></p>
      </td>
    </tr>
  </tbody>
</table>

## Environment Variables

Most configuration options can be specified as environment variables when starting the agent, for example:

```sh
BUILDKITE_AGENT_TAGS="queue=deploy,host=$(hostname)" buildkite-agent start
```

These variables cannot be modified through the Buildkite web interface, API or via pipeline upload for security reasons. You may be able to modify some of the options, such as `BUILDKITE_GIT_CLONE_FLAGS`, from within [hook scripts](/docs/agent/v3/hooks).
